{
    "schemes": ["http"],
    "swagger": "2.0",
    "info": {
        "description": "Cardano DeFi Markets API \u0026 Ingestor",
        "title": "Cardano - DeFi Markets API",
        "contact": { "name": "Maestro", "email": "support@gomaestro.org" },
        "version": "0.1"
    },
    "basePath": "/",
    "paths": {
        "/markets/dexs": {
            "get": {
                "description": "Returns all available DEXs",
                "produces": ["application/json"],
                "tags": ["DEX"],
                "summary": "DEXs",
                "operationId": "mkt-dexs",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": { "type": "string" }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": { "$ref": "#/definitions/api.APIError" }
                    },
                    "500": {
                        "description": "Server Error",
                        "schema": { "$ref": "#/definitions/api.APIError" }
                    }
                }
            }
        },
        "/markets/dexs/ohlc/{dex}/{pair}": {
            "get": {
                "description": "Returns market activity in candlestick OHLC format for a specific DEX and token pair",
                "produces": ["application/json"],
                "tags": ["DEX"],
                "summary": "DEX and Pair OHLC",
                "operationId": "mkt-dex-ohlc",
                "parameters": [
                    {
                        "type": "string",
                        "description": "minswap",
                        "name": "dex",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "ADA-MIN",
                        "name": "pair",
                        "in": "path",
                        "required": true
                    },
                    {
                        "enum": [
                            "1m",
                            "5m",
                            "15m",
                            "30m",
                            "1h",
                            "4h",
                            "1d",
                            "1w",
                            "1mo"
                        ],
                        "type": "string",
                        "description": "1h",
                        "name": "resolution",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "2023-04-01",
                        "name": "from",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "2023-05-15",
                        "name": "to",
                        "in": "query"
                    },
                    {
                        "maximum": 50000,
                        "minimum": 1,
                        "type": "integer",
                        "default": 5000,
                        "description": "10000",
                        "name": "limit",
                        "in": "query"
                    },
                    {
                        "enum": ["asc", "desc"],
                        "type": "string",
                        "description": "desc",
                        "name": "sort",
                        "in": "query"
                    },
                    {
                        "type": "boolean",
                        "description": "false",
                        "name": "carry",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/api.DexOhlcRespBody"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": { "$ref": "#/definitions/api.APIError" }
                    },
                    "500": {
                        "description": "Server Error",
                        "schema": { "$ref": "#/definitions/api.APIError" }
                    }
                }
            }
        },
        "/markets/dexs/trades/{dex}/{pair}": {
            "get": {
                "description": "Returns raw trades for a specific DEX and token pair",
                "produces": ["application/json"],
                "tags": ["DEX"],
                "summary": "DEX and Pair Trades",
                "operationId": "mkt-dex-trades",
                "parameters": [
                    {
                        "type": "string",
                        "description": "minswap",
                        "name": "dex",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "ADA-MIN",
                        "name": "pair",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "2023-04-01",
                        "name": "from",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "2023-05-15",
                        "name": "to",
                        "in": "query"
                    },
                    {
                        "maximum": 50000,
                        "minimum": 1,
                        "type": "integer",
                        "default": 5000,
                        "description": "10000",
                        "name": "limit",
                        "in": "query"
                    },
                    {
                        "enum": ["asc", "desc"],
                        "type": "string",
                        "description": "desc",
                        "name": "sort",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/api.DexTradesRespBody"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": { "$ref": "#/definitions/api.APIError" }
                    },
                    "500": {
                        "description": "Server Error",
                        "schema": { "$ref": "#/definitions/api.APIError" }
                    }
                }
            }
        },
        "/markets/dexs/{dex}": {
            "get": {
                "description": "Returns available pairs for a given DEX",
                "produces": ["application/json"],
                "tags": ["DEX"],
                "summary": "DEX pairs",
                "operationId": "mkt-dex",
                "parameters": [
                    {
                        "type": "string",
                        "example": "minswap",
                        "description": "DEX name",
                        "name": "dex",
                        "in": "path",
                        "required": true
                    },
                    {
                        "maxLength": 8,
                        "type": "string",
                        "example": "ADA-GENS",
                        "description": "DEX pair",
                        "name": "pair",
                        "in": "query"
                    },
                    {
                        "maxLength": 56,
                        "type": "string",
                        "example": "5ac3d4bdca238105a040a565e5d7e734b7c9e1630aec7650e809e34a",
                        "description": "Asset policy ID",
                        "name": "policy",
                        "in": "query"
                    },
                    {
                        "maxLength": 56,
                        "type": "string",
                        "example": "534e454b5f53554e4441455f4c51",
                        "description": "Asset name",
                        "name": "asset_name",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": { "$ref": "#/definitions/api.DexRespBody" }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": { "$ref": "#/definitions/api.APIError" }
                    },
                    "500": {
                        "description": "Server Error",
                        "schema": { "$ref": "#/definitions/api.APIError" }
                    }
                }
            }
        }
    },
    "definitions": {
        "api.APIError": {
            "type": "object",
            "properties": {
                "error": {
                    "description": "Error returned from the API request",
                    "type": "string",
                    "example": "Bad Request"
                }
            }
        },
        "api.DexOhlcRespBody": {
            "type": "object",
            "properties": {
                "coin_a_change_pct": {
                    "description": "Coin A change percentage",
                    "type": "number"
                },
                "coin_a_close": {
                    "description": "Coin A close",
                    "type": "number"
                },
                "coin_a_high": {
                    "description": "Coin B high",
                    "type": "number"
                },
                "coin_a_low": { "description": "Coin A low", "type": "number" },
                "coin_a_open": {
                    "description": "Coin A open",
                    "type": "number"
                },
                "coin_a_volume": {
                    "description": "Coin A volume",
                    "type": "number"
                },
                "coin_b_change_pct": {
                    "description": "Coin B change percentage",
                    "type": "number"
                },
                "coin_b_close": {
                    "description": "Coin B close",
                    "type": "number"
                },
                "coin_b_high": {
                    "description": "Coin A high",
                    "type": "number"
                },
                "coin_b_low": { "description": "Coin B low", "type": "number" },
                "coin_b_open": {
                    "description": "Coin B open",
                    "type": "number"
                },
                "coin_b_volume": {
                    "description": "Coin B volume",
                    "type": "number"
                },
                "count": {
                    "description": "Candlestick size",
                    "type": "integer"
                },
                "timestamp": {
                    "description": "Candlestick timestamp",
                    "type": "string"
                }
            }
        },
        "api.DexRespBody": {
            "type": "object",
            "properties": {
                "dex": { "type": "string" },
                "pairs": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/api.Pair" }
                }
            }
        },
        "api.DexTradesRespBody": {
            "type": "object",
            "properties": {
                "a_to_b": {
                    "description": "Direction of trade (1: Coin B received, 0: Coin A received)",
                    "type": "integer"
                },
                "coin_a_price": {
                    "description": "Coin A price",
                    "type": "number"
                },
                "coin_a_size": {
                    "description": "Coin A size",
                    "type": "number"
                },
                "coin_b_price": {
                    "description": "Coin B price",
                    "type": "number"
                },
                "coin_b_size": {
                    "description": "Coin B size",
                    "type": "number"
                },
                "dex": { "description": "DEX", "type": "string" },
                "pair": { "description": "Pair", "type": "string" },
                "receiver_address": {
                    "description": "Receiver address",
                    "type": "string"
                },
                "timestamp": {
                    "description": "Trade timestamp",
                    "type": "string"
                },
                "transaction_hash": {
                    "description": "Transaction hash",
                    "type": "string"
                }
            }
        },
        "api.Pair": {
            "type": "object",
            "properties": {
                "coin_a_asset_name": { "type": "string" },
                "coin_a_policy": { "type": "string" },
                "coin_b_asset_name": { "type": "string" },
                "coin_b_policy": { "type": "string" },
                "pair": { "type": "string" }
            }
        }
    }
}
